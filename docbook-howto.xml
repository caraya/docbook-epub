<?xml version="1.0" encoding="utf-8"?>
<book 
	xmlns='http://docbook.org/ns/docbook' 
	xmlns:xlink='http://www.w3.org/1999/xlink'
	version="5.0" xml:lang="en">
<title>Using From Docbook to ePub and Kindle too</title>
<info>
	<author>
		<personname>
			<firstname>Carlos</firstname><surname>Araya</surname>
		</personname>
	</author>
	</info>
<preface>
<title>Publishing for everyone</title>
<subtitle>Trying to get down to a definition of publishing</subtitle>

<para>Publishing is no longer the province of big publishers or that crazy people who dream of writing a book and find out that the only way to get published is to do it themselves. Well, we all can publish our work with tools like Docbook,  formats like ePub and publishers like Amazon.</para>

<para>We all have something to publish. We all have something to tell the world.</para>

<para>I chose to publish my content using Docbook because of it's flexibility. While we're talking only about ePub and Kindle publishing, Docbook can generate a variety of other formats using the same tools that we are using to generate our ePub content. You can learn more about Docbook and the associated XSLT style sheets at <link xlink:href="http://www.docbook.org/">http://www.docbook.org/</link>.</para>

<para>This e-book seeks to answer three questions that, to me, are essential to a successful publishing endeavor:</para>

<itemizedlist>
	<listitem>Why should I publish my own content?</listitem>
	<listitem>Why should I use Docbook to do it?</listitem>
	<listitem>How do I create my ebook using this tools?</listitem>
</itemizedlist>

<para>In answering these questions my hope is that you will create new content and give it to the world. I'm sure we'll all be much better for it</para>
</preface>

<chapter>
<title>Why should I create an ebook? Why with Docbook?</title>
<para>Again, We all have something to say to the world. And ebooks make it easier than ever to have the world as your audience. </para>
<sect1>
<title>Why Docbook?</title>
	<para>Content is required in chapters too.</para>
</sect1>
</chapter>

<chapter>
<title>Creating your Docbook content</title>
<para>Content is required in chapters too.</para>
<programlisting>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;book 
	xmlns='http://docbook.org/ns/docbook' 
	xmlns:xlink='http://www.w3.org/1999/xlink'
	version="5.0" xml:lang="en"&gt;
&lt;title&gt;Using From Docbook to ePub and Kindle too&lt;/title&gt;
&lt;info&gt;
	&lt;author&gt;
		&lt;personname&gt;
			&lt;firstname&gt;Carlos&lt;/firstname&gt;&lt;surname&gt;Araya&lt;/surname&gt;
		&lt;/personname&gt;
	&lt;/author&gt;
	&lt;/info&gt;
&lt;chapter&gt;
&lt;title&gt;Required Title&lt;/title&gt;

&lt;para&gt;Required paragraph.&lt;/para&gt;

&lt;/chapter&gt;
</programlisting>
</chapter>

<chapter>
<title>Converting the XML into different formats</title>
	<para>something interesting goes here</para>

<sect1>
	<title>Converting to ePub 2</title>
	<para>Content is required in chapters too.</para>
</sect1>

<sect1>
<title>Making an ePub3 ebook </title>
	<para>Content is required in chapters too.</para>
</sect1>

<sect1>
<title>Let's not forget the Kindle</title>
	<para>Content is required in chapters too.</para>
</sect1>
</chapter>

<chapter>
<title>Customizing the generated HTML</title>
	<para>Content is required in chapters too.</para>
</chapter>

<chapter>
	<title>Automating the process</title>

<sect1>
	<title>Apache Ant and making things easier on yourself</title>
	
	<para>I love Apache Ant</para>
</sect1>

<sect1>
	<title>One little addition or substractions</title>

	<para>Because I'm paranoid and I like to build my book over and over I found out a problem. If I accidentally delete any of the directories that Docbook creates for me, the build process will fail. However, removing the existing files and directories is essential to ensure that only the latest version of our generated files makes it into the ebook.</para>

<para>I decided to use the If ant task from the Ant Contrib Project. Download links and instructions for installing the additional tasks and configuring your build file to use them see <link xlink:href="http://ant-contrib.sourceforge.net/">http://ant-contrib.sourceforge.net/</link>.</para>

<para>The <emphasis>if</emphasis> task acts as a conditional if. It allows a task to branch out based in a condition, in our case if a directory exists. If it does then go ahead and delete everything (Docbook will never create the directory we're using for the condition alone); if it doesn't exist then print a message and do nothing.</para>

<para>if you do not want to use the if task for whatever reason you will have to make the following changes:</para>

<para>Remove <emphasis>&lt;taskdef resource="net/sf/antcontrib/antcontrib.properties"/&gt;</emphasis> from your build file.</para>

<para>Remove <emphasis>&lt;antcall target="epub-clean"/&gt;</emphasis> from bot the epub and epub3 targets. This call will cause the build to fail if any of the files or directories are missing. You will have to run this task manually before building the book.</para>

<para>Change the epub-clean target from this:</para>

<programlisting>&lt;target name="epub-clean"&gt;
&lt;description&gt;
	Cleans up leftover epub stuff
&lt;/description&gt;
&lt;if&gt;
	&lt;available file="OEBPS" type="dir" /&gt;
	&lt;then&gt;
		&lt;echo message="Directory exist... deleting" /&gt;
		&lt;delete verbose="true"&gt;
			&lt;fileset dir="OEBPS" includes="*"/&gt;
			&lt;fileset dir="META-INF" includes="*"/&gt;
		&lt;/delete&gt;
		&lt;delete verbose="true" file="mimetype"/&gt;
		&lt;delete verbose="true" dir="META-INF"/&gt;
		&lt;delete verbose="true" dir="OEBPS"/&gt;
		&lt;delete verbose="true" file="${src_file}.epub"/&gt;
	&lt;/then&gt;
	&lt;else&gt;
		&lt;echo message="Directory DOES NOT exist... Nothing to delete" /&gt;
	&lt;/else&gt;
&lt;/if&gt;
&lt;/target&gt;</programlisting>

<para>to:</para>

<programlisting>&lt;target name="epub-clean"&gt;
&lt;description&gt;
	Cleans up leftover epub stuff
&lt;/description&gt;
&lt;delete verbose="true"&gt;
	&lt;fileset dir="OEBPS" includes="*"/&gt;
	&lt;fileset dir="META-INF" includes="*"/&gt;
&lt;/delete&gt;
&lt;delete verbose="true" file="mimetype"/&gt;
&lt;delete verbose="true" dir="META-INF"/&gt;
&lt;delete verbose="true" dir="OEBPS"/&gt;
&lt;delete verbose="true" file="${src_file}.epub"/&gt;
&lt;/then&gt;
&lt;/target&gt;</programlisting>
</sect1>

<sect1>
	<title>The final build file</title>

<para>After adding the if task the code looks like this:</para>
	<programlisting>The code for the build file goes here</programlisting>
</sect1>
</chapter>

<chapter>
<title>Publishing your content</title>

<para>This is where we talk about publishing your content yourself, publishing to Amazon and, maybe, to the iBooks store</para>
</chapter>

<bibliography>
<title>References</title>

<bibliomixed>
	<bibliomset relation='book'>Sayton, Robert.
 		<title role='book'>Introduction to Cascading Style Sheets</title>.
	</bibliomset>
	<bibliomset relation='journal'>
		<title>The World Wide Web Journal</title>
		<volumenum>2</volumenum><issuenum>1</issuenum>.
		<publishername>O'Reilly &amp; Associates, Inc.</publishername> and The World Wide Web Consortium. Winter, 1996</bibliomset>.
	</bibliomixed>
</bibliography>

<!--
<colophon>
<para>Draft versions of the first edition of this book were produced with the DocBook DSSSL Stylesheets. Final production was performed with Troff.</para>
<para>XSLT and XSL were used to produce the second edition.</para>
</colophon>
-->
</book>